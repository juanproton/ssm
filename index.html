<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>JPV</title>

<style>
body {
  margin: 0;
  font-family: Helvetica, sans-serif;
  overflow: hidden;
}

nav {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  display: flex;
  gap: 20px;
  padding: 20px;
  background: white;
  border-bottom: 1px solid #ddd;
  z-index: 10;
}

nav a {
  text-decoration: none;
  color: black;
}

.container {
  height: 100vh;
  overflow-y: scroll;
  scroll-snap-type: y mandatory;
}

.section {
  height: 100vh;
  scroll-snap-align: start;

  display: flex;
  align-items: center;
  justify-content: center;

  font-size: 40px;
}

.s1 { background: #ff4d4d; }
.s2 { background: #4d7fff; }
.s3 { background: #4dff88; }
</style>
</head>

<body>

<nav>
  <a href="#s1">INIT</a>
  <a href="#s2">WHO</a>
  <a href="#s3">ART</a>
</nav>

<div class="container" id="scroller">

  <!-- BLOQUE REAL -->
  <section class="section s1">1</section>
  <section class="section s2">2</section>
  <section class="section s3">3</section>

  <!-- BLOQUE DUPLICADO -->
  <section class="section s1">1</section>
  <section class="section s2">2</section>
  <section class="section s3">3</section>

</div>

<script>
const scroller = document.getElementById("scroller");
const sections = document.querySelectorAll(".section");
const total = sections.length;
const half = total / 2;

let locked = false;

// arrancar en el primer bloque real
scroller.scrollTop = 1;

scroller.addEventListener("scroll", () => {
  if (locked) return;

  const h = window.innerHeight;
  const y = scroller.scrollTop;

  const index = Math.round(y / h);

  // Si entró al bloque duplicado (4,5,6)
  if (index >= half) {
    locked = true;

    // volver a la sección equivalente del primer bloque
    scroller.scrollTop = (index - half) * h + 1;

    setTimeout(() => locked = false, 40);
  }

  // Si sube por arriba del inicio
  if (index < 0) {
    locked = true;

    scroller.scrollTop = (half - 1) * h + 1;

    setTimeout(() => locked = false, 40);
  }
});
</script>

</body>
</html>
