<script>
let current = 0;
let isMoving = false;

function apply() {
  const w = document.getElementById("wrapper");
  w.style.transform = `translateY(${-current * window.innerHeight}px)`;
}

function goTo(i) {
  current = Math.max(0, Math.min(2, i));
  apply();
}

// ===== DESKTOP / TRACKPAD =====
// UN SOLO EVENTO = UN SOLO SALTO

window.addEventListener("wheel", e => {
  e.preventDefault();        // clave para trackpads con inercia
  if (isMoving) return;

  isMoving = true;

  if (e.deltaY > 0) current += 1;
  if (e.deltaY < 0) current -= 1;

  current = Math.max(0, Math.min(2, current));

  apply();

  setTimeout(() => {
    isMoving = false;
  }, 900);
}, { passive: false });


// ===== MOBILE =====
// CUALQUIER SWIPE = 1 SALTO

let startY = 0;

window.addEventListener("touchstart", e => {
  startY = e.touches[0].clientY;
});

window.addEventListener("touchend", e => {
  if (isMoving) return;

  let endY = e.changedTouches[0].clientY;
  let delta = endY - startY;

  // si casi no hubo movimiento, no hacemos nada
  if (Math.abs(delta) < 10) return;

  isMoving = true;

  if (delta < 0) current += 1;
  else current -= 1;

  current = Math.max(0, Math.min(2, current));

  apply();

  setTimeout(() => {
    isMoving = false;
  }, 900);
});

window.addEventListener("resize", apply);
</script>
