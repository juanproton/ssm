<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>VALLEJO</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

<style>
body {
  margin: 0;
  font-family: Helvetica, sans-serif;
  overflow: hidden;
}

nav {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  display: flex;
  gap: 20px;
  padding: 20px;
  background: white;
  z-index: 10;
}

nav a {
  cursor: pointer;
}

#wrapper {
  transition: transform 0.7s ease;
}

.section {
  width: 100vw;
  height: 100vh;

  display: flex;
  justify-content: center;
  align-items: center;

  font-size: 40px;
}

#init { background: #e3e3ff; }
#who  { background: #ffe3e3; }
#art  { background: #e3ffe3; }

#p5-container {
  width: 100%;
  height: 100%;
}
</style>
</head>

<body>

<nav>
  <a onclick="goTo(0)">INIT</a>
  <a onclick="goTo(1)">WHO</a>
  <a onclick="goTo(2)">ART</a>
</nav>

<div id="wrapper">

  <div class="section" id="init">
    <div id="p5-container"></div>
  </div>

  <div class="section" id="who">WHO</div>
  <div class="section" id="art">ART</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/p5@1.9.4/lib/p5.min.js"></script>
<script src="Random.js"></script>
<script src="sketch.js"></script>

<script>
let current = 0;
let isMoving = false;

function apply() {
  const w = document.getElementById("wrapper");
  w.style.transform = `translateY(${-current * window.innerHeight}px)`;
}

function goTo(i) {
  current = Math.max(0, Math.min(2, i));
  apply();
}

// ===== DESKTOP WHEEL =====

window.addEventListener("wheel", e => {
  if (isMoving) return;

  isMoving = true;

  if (e.deltaY > 0) current++;
  else current--;

  current = Math.max(0, Math.min(2, current));

  apply();

  setTimeout(() => isMoving = false, 750);
});


// ===== MOBILE SWIPE =====

let startY = 0;
let deltaY = 0;

window.addEventListener("touchstart", e => {
  startY = e.touches[0].clientY;
});

window.addEventListener("touchmove", e => {
  deltaY = e.touches[0].clientY - startY;
});

window.addEventListener("touchend", () => {
  if (isMoving) return;

  if (Math.abs(deltaY) < 50) return;

  isMoving = true;

  if (deltaY < 0) current++;
  else current--;

  current = Math.max(0, Math.min(2, current));

  apply();

  setTimeout(() => isMoving = false, 750);

  deltaY = 0;
});

window.addEventListener("resize", apply);
</script>

</body>
</html>
